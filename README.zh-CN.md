# ChatGPT ç”µæŠ¥æœºå™¨äºº

åŠ å…¥ [ç”µæŠ¥ç¾¤](https://t.me/+_01cz9tAkUc1YzZl) åˆ†äº«æ‚¨çš„ç”¨æˆ·ä½“éªŒæˆ–æŠ¥å‘Šé”™è¯¯ã€‚

[è‹±è¯­](./README.md) | [ç®€ä½“ä¸­æ–‡](./README.zh-CN.md) | [ç¹ä½“ä¸­æ–‡](./README.zh-TW.md)

## âœ¨ ç‰¹å¾

âœ… æ”¯æŒ ChatGPT å’Œ GPT4 API

âœ… æ”¯æŒä½¿ç”¨ duckduckgo å’Œ GoogleğŸ” è¿›è¡Œåœ¨çº¿æœç´¢ã€‚ duckduckgo æœç´¢æ˜¯é»˜è®¤æä¾›çš„ï¼Œè€Œ Google æœç´¢çš„å®˜æ–¹ API éœ€è¦ç”¨æˆ·ç”³è¯·ã€‚å®ƒå¯ä»¥æä¾› GPT ä»¥å‰æ— æ³•å›ç­”çš„å®æ—¶ä¿¡æ¯ï¼Œä¾‹å¦‚å¾®åšçƒ­æœä»Šå¤©ï¼ŒæŸåœ°ä»Šå¤©çš„å¤©æ°”ï¼Œä»¥åŠæŸäººæˆ–æ–°é—»çš„è¿›å±•ã€‚

âœ… æ”¯æŒåŸºäºåµŒå…¥å¼å‘é‡æ•°æ®åº“çš„æ–‡æ¡£ QAã€‚åœ¨æœç´¢ä¸­ï¼Œå¯¹äºæœç´¢çš„ PDFï¼Œä¼šæ‰§è¡Œ PDF æ–‡æ¡£çš„è‡ªåŠ¨å‘é‡è¯­ä¹‰æœç´¢ï¼Œå¹¶åŸºäºå‘é‡æ•°æ®åº“æå– pdf ç›¸å…³å†…å®¹ã€‚æ”¯æŒä½¿ç”¨â€œqaâ€å‘½ä»¤å¯¹â€œsitemap.xmlâ€æ–‡ä»¶çš„æ•´ä¸ªç½‘ç«™è¿›è¡Œå‘é‡åŒ–ï¼Œå¹¶æ ¹æ®å‘é‡æ•°æ®åº“å›ç­”é—®é¢˜ï¼Œç‰¹åˆ«é€‚ç”¨äºæŸäº›é¡¹ç›®çš„æ–‡æ¡£ç½‘ç«™å’Œ wiki ç½‘ç«™ã€‚

âœ… æ”¯æŒé€šè¿‡èŠå¤©çª—å£ä¸­çš„â€œinfoâ€å‘½ä»¤åœ¨ GPT3.5ã€GPT4 å’Œå…¶ä»–æ¨¡å‹ä¹‹é—´åˆ‡æ¢

âœ… å¼‚æ­¥å¤„ç†æ¶ˆæ¯ï¼Œå¤šçº¿ç¨‹å›ç­”é—®é¢˜ï¼Œæ”¯æŒéš”ç¦»å¯¹è¯ï¼Œä¸åŒç”¨æˆ·æœ‰ä¸åŒçš„å¯¹è¯

âœ… æ”¯æŒæ¶ˆæ¯çš„ç²¾ç¡® Markdown æ¸²æŸ“ï¼Œä½¿ç”¨æˆ‘å¦ä¸€ä¸ª [é¡¹ç›®](https://github.com/yym68686/md2tgmd)

âœ… æ”¯æŒæµè¾“å‡ºï¼Œå®ç°æ‰“å­—æœºæ•ˆæœ

âœ… æ”¯æŒç™½åå•é˜²æ­¢æ»¥ç”¨å’Œä¿¡æ¯æ³„éœ²

âœ… è·¨å¹³å°ï¼Œåœ¨Telegramä¸Šéšæ—¶éšåœ°æ‰“ç ´çŸ¥è¯†éšœç¢

âœ… æ”¯æŒä¸€é”® Zeaburã€Replit éƒ¨ç½²ï¼ŒçœŸæ­£çš„é›¶æˆæœ¬ï¼Œç™½ç—´åŒ–éƒ¨ç½²ï¼Œå¹¶æ”¯æŒ kuma é˜²ç¡çœ ã€‚ä¹Ÿæ”¯æŒ Dockerã€fly.io éƒ¨ç½²

## ç¯å¢ƒå˜é‡

| å˜é‡åç§°                  | è¯´æ˜                                                         |
| ------------------------ | ------------------------------------------------------------ |
| **BOT_TOKEN (å¿…éœ€)**      | Telegram æœºå™¨äººä»¤ç‰Œã€‚åœ¨ [BotFather](https://t.me/BotFather) ä¸Šåˆ›å»ºæœºå™¨äººä»¥è·å– BOT_TOKENã€‚ |
| **WEB_HOOK (å¿…éœ€)**       | ç”µæŠ¥æœºå™¨äººæ¯å½“æ”¶åˆ°ç”¨æˆ·æ¶ˆæ¯éƒ½ä¼šå°†æ¶ˆæ¯ä¼ é€’ç»™ WEB_HOOKï¼Œåœ¨é‚£é‡Œæœºå™¨äººå°†ä¼šç›‘å¬å¹¶åŠæ—¶å¤„ç†æ”¶åˆ°çš„æ¶ˆæ¯ã€‚ |
| **API (å¿…éœ€)**            | OpenAI æˆ–ç¬¬ä¸‰æ–¹ API å¯†é’¥ã€‚                                |
| API_URLï¼ˆå¯é€‰ï¼‰           | å¦‚æœæ‚¨ä½¿ç”¨çš„æ˜¯ OpenAI å®˜æ–¹ APIï¼Œåˆ™ä¸éœ€è¦è®¾ç½®æ­¤é¡¹ã€‚å¦‚æœæ‚¨ä½¿ç”¨çš„æ˜¯ç¬¬ä¸‰æ–¹ APIï¼Œåˆ™éœ€è¦å¡«å†™ç¬¬ä¸‰æ–¹ä»£ç†ç½‘ç«™ã€‚é»˜è®¤ä¸º: https://api.openai.com/v1/chat/completions |
| GPT_ENGINEï¼ˆå¯é€‰ï¼‰        | è®¾ç½®é»˜è®¤çš„ QA æ¨¡å‹ï¼›é»˜è®¤å€¼ä¸ºï¼š`gpt-3.5-turbo`ã€‚å¯ä»¥ä½¿ç”¨æœºå™¨äººçš„â€œinfoâ€å‘½ä»¤è‡ªç”±åˆ‡æ¢æ­¤é¡¹ï¼ŒåŸåˆ™ä¸Šä¸éœ€è¦è®¾ç½®ã€‚ |
| NICKï¼ˆå¯é€‰ï¼‰              | é»˜è®¤ä¸ºç©ºï¼ŒNICK æ˜¯æœºå™¨äººçš„åå­—ã€‚ä»…å½“ç”¨æˆ·è¾“å…¥çš„æ¶ˆæ¯ä»¥ NICK å¼€å¤´æ—¶ï¼Œæœºå™¨äººæ‰ä¼šå›ç­”ï¼Œå¦åˆ™æœºå™¨äººå°†å›ç­”ä»»ä½•æ¶ˆæ¯ã€‚ç‰¹åˆ«æ˜¯åœ¨ç¾¤èŠä¸­ï¼Œå¦‚æœæ²¡æœ‰ NICKï¼Œåˆ™æœºå™¨äººå°†å¯¹æ‰€æœ‰æ¶ˆæ¯è¿›è¡Œå›ç­”ã€‚ |
| PASS_HISTORYï¼ˆå¯é€‰ï¼‰      | é»˜è®¤ä¸º trueã€‚æœºå™¨äººä¼šè®°ä½å¯¹è¯å†å²è®°å½•ï¼Œå¹¶åœ¨ä¸‹æ¬¡å›ç­”æ—¶è€ƒè™‘ä¸Šä¸‹æ–‡ã€‚å¦‚æœè®¾ç½®ä¸º falseï¼Œåˆ™æœºå™¨äººå°†å¿˜è®°å¯¹è¯å†å²è®°å½•ï¼Œå¹¶ä¸”ä»…è€ƒè™‘å½“å‰å¯¹è¯ã€‚ |
| GOOGLE_API_KEYï¼ˆå¯é€‰ï¼‰    | å¦‚æœéœ€è¦ä½¿ç”¨ Google æœç´¢ï¼Œåˆ™éœ€è¦è®¾ç½®ã€‚å¦‚æœä¸è®¾ç½®æ­¤ç¯å¢ƒå˜é‡ï¼Œåˆ™æœºå™¨äººé»˜è®¤æä¾› duckduckgo æœç´¢ã€‚åœ¨ Google Cloud çš„ [API å’ŒæœåŠ¡](https://console.cloud.google.com/apis/api/customsearch.googleapis.com) ä¸­åˆ›å»ºå‡­æ®ï¼ŒAPI å¯†é’¥å°†åœ¨å‡­æ®é¡µé¢ä¸Šæ˜¯ GOOGLE_API_KEYã€‚Google æœç´¢ä¸€å¤©å¯ä»¥æŸ¥è¯¢ 100 æ¬¡ï¼Œè¿™å¯¹äºè½»åº¦ä½¿ç”¨å®Œå…¨è¶³å¤Ÿã€‚å½“ä½¿ç”¨é™åˆ¶å·²è¾¾åˆ°æ—¶ï¼Œæœºå™¨äººå°†è‡ªåŠ¨å…³é—­ Google æœç´¢ã€‚ |
| GOOGLE_CSE_IDï¼ˆå¯é€‰ï¼‰     | å¦‚æœéœ€è¦ä½¿ç”¨ Google æœç´¢ï¼Œåˆ™éœ€è¦ä¸ GOOGLE_API_KEY ä¸€èµ·è®¾ç½®ã€‚åœ¨ [å¯ç¼–ç¨‹æœç´¢å¼•æ“](https://programmablesearchengine.google.com/) ä¸­åˆ›å»ºä¸€ä¸ªæœç´¢å¼•æ“ï¼Œæœå¯»å¼•æ“ ID æ˜¯ GOOGLE_CSE_ID çš„å€¼ã€‚ |
| whitelistï¼ˆå¯é€‰ï¼‰        | è®¾ç½®å“ªäº›ç”¨æˆ·å¯ä»¥è®¿é—®æœºå™¨äººï¼Œå¹¶ä½¿ç”¨â€œï¼Œâ€å°†æˆæƒä½¿ç”¨æœºå™¨äººçš„ç”¨æˆ· ID è¿æ¥èµ·æ¥ã€‚é»˜è®¤å€¼ä¸º `None`ï¼Œè¿™æ„å‘³ç€æœºå™¨äººå‘æ‰€æœ‰äººå¼€æ”¾ã€‚ |

## Zeabur è¿œç¨‹éƒ¨ç½²ï¼ˆæ¨èï¼‰

ä¸€é”®éƒ¨ç½²ï¼š

[![Deploy on Zeabur](https://zeabur.com/button.svg)](https://zeabur.com/templates/R5JY5O?referralCode=yym68686)

å¦‚æœæ‚¨éœ€è¦åç»­åŠŸèƒ½æ›´æ–°ï¼Œåˆ™å»ºè®®ä½¿ç”¨ä»¥ä¸‹éƒ¨ç½²æ–¹æ³•ï¼š

é¦–å…ˆ fork æœ¬ä»“åº“ï¼Œç„¶åæ³¨å†Œ [Zeabur](https://zeabur.com)ã€‚å…è´¹é…é¢è¶³å¤Ÿè½»åº¦ä½¿ç”¨ã€‚ä»æ‚¨è‡ªå·±çš„ Github ä»“åº“å¯¼å…¥ï¼Œè®¾ç½®åŸŸåï¼ˆå¿…é¡»ä¸ WEB_HOOK ä¸€è‡´ï¼‰å’Œç¯å¢ƒå˜é‡ï¼Œå¹¶é‡æ–°éƒ¨ç½²ã€‚å¦‚æœæ‚¨éœ€è¦åç»­çš„åŠŸèƒ½æ›´æ–°ï¼Œåªéœ€å°†æ­¤å­˜å‚¨åº“åŒæ­¥åˆ°æ‚¨è‡ªå·±çš„å­˜å‚¨åº“ä¸­ï¼Œå¹¶åœ¨ Zeabur é‡æ–°éƒ¨ç½²ä»¥è·å¾—æœ€æ–°çš„åŠŸèƒ½å³å¯ã€‚

## Replit è¿œç¨‹éƒ¨ç½²

[![Run on Repl.it](https://replit.com/badge/github/yym68686/ChatGPT-Telegram-Bot)](https://replit.com/new/github/yym68686/ChatGPT-Telegram-Bot)

å¯¼å…¥ Github ä»“åº“åï¼Œè®¾ç½®è¿è¡Œå‘½ä»¤

```bash
pip install -r requirements.txt > /dev/null && python3 main.py
```

åœ¨ Tools ä¾§è¾¹æ ä¸­é€‰æ‹© Secretsï¼Œæ·»åŠ æœºå™¨äººæ‰€éœ€çš„ç¯å¢ƒå˜é‡ï¼Œå…¶ä¸­ï¼š

- WEB_HOOKï¼šReplit å°†è‡ªåŠ¨ä¸ºæ‚¨åˆ†é…ä¸€ä¸ªåŸŸåï¼Œå¡«å†™ `https://appname.username.repl.co`
- è®°å¾—æ‰“å¼€â€œå§‹ç»ˆä¿æŒæ´»åŠ¨çŠ¶æ€â€

å•å‡»å±å¹•é¡¶éƒ¨çš„è¿è¡ŒæŒ‰é’®ä»¥è¿è¡Œæœºå™¨äººã€‚

## fly.io è¿œç¨‹éƒ¨ç½²

å®˜æ–¹æ–‡æ¡£ï¼šhttps://fly.io/docs/

ä½¿ç”¨ Docker é•œåƒéƒ¨ç½² fly.io åº”ç”¨ç¨‹åº

```bash
flyctl launch --image yym68686/chatgpt:1.0
```

æç¤ºè¾“å…¥åº”ç”¨ç¨‹åºåç§°ï¼Œå¹¶é€‰æ‹©æ˜¯å¦åˆå§‹åŒ– PostgreSQL æˆ– Redisã€‚

æŒ‰æç¤ºéƒ¨ç½²ã€‚åœ¨å®˜æ–¹æ§åˆ¶é¢æ¿ä¸­æä¾›ä¸€ä¸ªæ¬¡çº§åŸŸåï¼Œå¯ç”¨äºè®¿é—®æœåŠ¡ã€‚

è®¾ç½®ç¯å¢ƒå˜é‡

```bash
flyctl secrets set WEB_HOOK=https://flyio-app-name.fly.dev/
flyctl secrets set BOT_TOKEN=bottoken
flyctl secrets set API=
# optional
flyctl secrets set NICK=javis
```

æŸ¥çœ‹æ‰€æœ‰ç¯å¢ƒå˜é‡

```bash
flyctl secrets list
```

ç§»é™¤ç¯å¢ƒå˜é‡

```bash
flyctl secrets unset MY_SECRET DATABASE_URL
```

ssh åˆ° fly.io å®¹å™¨

```bash
flyctl ssh issue --agent
# ssh connection
flyctl ssh establish
```

æ£€æŸ¥ webhook URL æ˜¯å¦æ­£ç¡®

```bash
https://api.telegram.org/bot<token>/getWebhookInfo
```

## Docker æœ¬åœ°éƒ¨ç½²

å¯åŠ¨å®¹å™¨

```bash
docker run -p 80:8080 -dit \
    -e BOT_TOKEN="telegram bot token" \
    -e WEB_HOOK="https://your_host.com/" \
    -e API="" \
    -e API_URL= \
    yym68686/chatgpt:1.0
```

æˆ–è€…å¦‚æœæ‚¨æƒ³è¦ä½¿ç”¨ Docker Composeï¼Œè¿™æ˜¯ä¸€ä¸ª docker-compose.yml ç¤ºä¾‹ï¼š

```yaml
version: "3.5"
services:
  chatgptbot:
    container_name: chatgptbot
    image: yym68686/chatgpt:1.0
    environment:
      - BOT_TOKEN=
      - WEB_HOOK=
      - API=
      - API_URL=
    ports:
      - 80:8080
```

åœ¨åå°è¿è¡Œ Docker Compose å®¹å™¨

```bash
docker-compose up -d
```

å°† Docker æ˜ åƒæ‰“åŒ…åˆ°å­˜å‚¨åº“ä¸­ï¼Œå¹¶å°†å…¶ä¸Šä¼ åˆ° Docker Hub

```bash
docker build --no-cache -t chatgpt:1.0 -f Dockerfile.build --platform linux/amd64 .
docker tag chatgpt:1.0 yym68686/chatgpt:1.0
docker push yym68686/chatgpt:1.0
```

## å‚è€ƒ

å‚è€ƒé¡¹ç›®ï¼š

https://core.telegram.org/bots/api

https://github.com/acheong08/ChatGPT

https://github.com/franalgaba/chatgpt-telegram-bot-serverless

https://github.com/gpchelkin/scdlbot/blob/d64d14f6c6d357ba818e80b8a0a9291c2146d6fe/scdlbot/__main__.py#L8

æ¶ˆæ¯çš„ Markdown æ¸²æŸ“ä½¿ç”¨äº†æˆ‘çš„å¦ä¸€ä¸ª [é¡¹ç›®](https://github.com/yym68686/md2tgmd)ã€‚

## æ˜Ÿæ ‡å†å²

<a href="https://github.com/yym68686/ChatGPT-Telegram-Bot/stargazers">
        <img width="500" alt="Star History Chart" src="https://api.star-history.com/svg?repos=yym68686/ChatGPT-Telegram-Bot&type=Date">
</a>