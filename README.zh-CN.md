# ChatGPT Telegram Bot

Join the [Telegram Group](https://t.me/+_01cz9tAkUc1YzZl) chat to share your user experience or report Bugs.

[è‹±æ–‡](./README.md) | [ç®€ä½“ä¸­æ–‡](./README.zh-CN.md) ï½œ [ç¹ä½“ä¸­æ–‡](./README.zh-TW.md)

## âœ¨ Features

âœ… æ”¯æŒ ChatGPT å’Œ GPT4 API

âœ… æ”¯æŒ duckduckgoï¼ŒGoogle è”ç½‘æœç´¢ğŸ”ã€‚é»˜è®¤æä¾› duckduckgo æœç´¢ï¼Œgoogle æœç´¢éœ€è¦è‡ªè¡Œç”³è¯·å®˜æ–¹ APIã€‚å¯ä»¥å›ç­”ä¹‹å‰ gpt å›ç­”ä¸äº†çš„å®æ—¶ä¿¡æ¯ï¼Œæ¯”å¦‚ä»Šå¤©çš„å¾®åšçƒ­æœï¼Œä»Šå¤©æŸåœ°çš„å¤©æ°”ï¼ŒæŸæŸäººæˆ–æ–°é—»çš„è¿›å±•

âœ… æ”¯æŒåŸºäºåµŒå…¥å‘é‡æ•°æ®åº“çš„æ–‡æ¡£é—®ç­”ã€‚åœ¨æœç´¢ä¸­ï¼Œå¯¹äºæœç´¢åˆ°çš„ pdfï¼Œå¯ä»¥è‡ªåŠ¨å¯¹ PDF æ–‡æ¡£è¿›è¡Œå‘é‡åŒ–è¯­ä¹‰æœç´¢ï¼Œå¹¶åŸºäºå‘é‡æ•°æ®åº“æå– pdf ç›¸å…³çš„å†…å®¹ã€‚æ”¯æŒä½¿ç”¨ qa å‘½ä»¤å¯¹å«æœ‰ sitemap.xml æ–‡ä»¶çš„ç½‘ç«™æ•´ä½“å‘é‡åŒ–ï¼Œå¹¶åŸºäºå‘é‡æ•°æ®åº“å›ç­”é—®é¢˜ï¼Œç‰¹åˆ«é€‚åˆä¸€äº›é¡¹ç›®çš„æ–‡æ¡£ç½‘ç«™ï¼Œwiki ç½‘ç«™

âœ… æ”¯æŒåœ¨èŠå¤©æ¡†å†…ä½¿ç”¨ info å‘½ä»¤é€šè¿‡ç‚¹å‡»æŒ‰é’®è‡ªç”±åˆ‡æ¢ gpt3.5ï¼Œgpt4 ç­‰æ¨¡å‹

âœ… å¼‚æ­¥å¤„ç†æ¶ˆæ¯ï¼Œå¤šçº¿ç¨‹å›ç­”é—®é¢˜ï¼Œæ”¯æŒå¯¹è¯éš”ç¦»ï¼Œä¸åŒç”¨æˆ·ä¸åŒå¯¹è¯

âœ… æ”¯æŒç²¾å‡†çš„æ¶ˆæ¯ Markdown æ¸²æŸ“ï¼Œç”¨çš„æ˜¯æˆ‘çš„å¦ä¸€ä¸ª[é¡¹ç›®](https://github.com/yym68686/md2tgmd)

âœ… æ”¯æŒæµå¼è¾“å‡ºï¼Œå®ç°æ‰“å­—æœºæ•ˆæœ

âœ… æ”¯æŒç™½åå•ï¼Œé˜²æ­¢æ»¥ç”¨ä¸ä¿¡æ¯æ³„æ¼

âœ… å…¨å¹³å°ï¼Œéšæ—¶éšåœ°ï¼Œåªè¦æœ‰ telegram å°±å¯ä»¥æ‰“ç ´çŸ¥è¯†å£å’

âœ… æ”¯æŒä¸€é”® Zeaburï¼ŒReplit éƒ¨ç½²ï¼ŒçœŸæ­£çš„é›¶æˆæœ¬ï¼Œå‚»ç“œå¼éƒ¨ç½²ï¼Œæ”¯æŒ kuma é˜²ç¡çœ ã€‚åŒæ—¶æ”¯æŒ dockerï¼Œfly.io éƒ¨ç½²

## ç¯å¢ƒå˜é‡

| å˜é‡åç§°               | å¤‡æ³¨                                                         |
| ---------------------- | ------------------------------------------------------------ |
| **BOT_TOKENï¼ˆå¿…å¡«ï¼‰**  | telegram æœºå™¨äººä»¤ç‰Œï¼Œåœ¨ [BotFather](https://t.me/BotFather) åˆ›å»ºä¸€ä¸ª bot ä»¥è·å– BOT_TOKENã€‚ |
| **WEB_HOOKï¼ˆå¿…å¡«ï¼‰**   | telegram bot æ¯æ¬¡æ”¶åˆ°ç”¨æˆ·æ¶ˆæ¯ï¼Œéƒ½ä¼šæŠŠæ¶ˆæ¯ä¼ ç»™ WEB_HOOKï¼Œæœºå™¨äººä¼šåœ¨æ­¤ç›‘å¬ï¼ŒåŠæ—¶å¤„ç† telegram é‡Œé¢æ”¶åˆ°çš„æ¶ˆæ¯ã€‚ |
| **APIï¼ˆå¿…å¡«ï¼‰**        | OpenAI æˆ–è€…ç¬¬ä¸‰æ–¹çš„ api keyã€‚                                |
| API_URLï¼ˆå¯é€‰ï¼‰        | å¦‚æœä½¿ç”¨ OpenAI å®˜æ–¹ APIï¼Œä¸éœ€è¦è®¾ç½®æ­¤é¡¹ã€‚å¦‚æœä½¿ç”¨ç¬¬ä¸‰æ–¹APIï¼Œéœ€è¦å¡«å†™ç¬¬ä¸‰æ–¹ä»£ç†ç½‘å€ï¼Œé»˜è®¤å€¼ä¸ºï¼šhttps://api.openai.com/v1/chat/completions |
| GPT_ENGINEï¼ˆå¯é€‰ï¼‰     | è®¾ç½®é»˜è®¤çš„é—®ç­”æ¨¡å‹ï¼Œé»˜è®¤ä¸ºï¼š`gpt-3.5-turbo`ï¼Œè¯¥é¡¹å¯ä»¥ä½¿ç”¨æœºå™¨äºº info å‘½ä»¤è‡ªç”±åˆ‡æ¢ï¼ŒåŸåˆ™ä¸Šä¸éœ€è¦è®¾ç½®ã€‚ |
| NICKï¼ˆå¯é€‰ï¼‰           | é»˜è®¤ä¸ºç©ºï¼ŒNICK æ˜¯æœºå™¨äººçš„åå­—ã€‚å½“ç”¨æˆ·è¾“å…¥æ¶ˆæ¯ä»¥ NICK å¼€å¤´ï¼Œæœºå™¨äººæ‰ä¼šå›ç­”ï¼Œå¦åˆ™æœºå™¨äººä¼šå›ç­”ä»»ä½•æ¶ˆæ¯ã€‚å°¤å…¶åœ¨ç¾¤èŠé‡Œï¼Œæ²¡æœ‰ NICKï¼Œæœºå™¨äººä¼šå¯¹æ‰€æœ‰æ¶ˆæ¯è¿›è¡Œå›å¤ã€‚ |
| PASS_HISTORYï¼ˆå¯é€‰ï¼‰   | é»˜è®¤ä¸ºçœŸï¼Œè¡¨ç¤ºæœºå™¨äººä¼šè®°ä½å¯¹è¯å†å²ï¼Œä¸‹æ¬¡å›å¤æ—¶ä¼šè€ƒè™‘ä¸Šä¸‹æ–‡ã€‚å¦‚æœè®¾ç½®ä¸ºå‡ï¼Œæœºå™¨äººä¼šå¿˜è®°å¯¹è¯å†å²ï¼Œåªè€ƒè™‘å½“å‰å¯¹è¯ã€‚ |
| GOOGLE_API_KEYï¼ˆå¯é€‰ï¼‰ | å¦‚æœéœ€è¦è°·æ­Œæœç´¢ï¼Œåˆ™éœ€è¦è®¾ç½®ã€‚å¦‚æœä¸è®¾ç½®æ­¤ç¯å¢ƒå˜é‡ï¼Œæœºå™¨äººé»˜è®¤æä¾› duckduckgo æœç´¢ã€‚åœ¨ Google cloud çš„ [API ä¸æœåŠ¡](https://console.cloud.google.com/apis/api/customsearch.googleapis.com) ä¸­åˆ›å»ºå‡­æ®ï¼Œåœ¨å‡­æ®é¡µé¢ API Key å°±æ˜¯ GOOGLE_API_KEYã€‚Google æœç´¢ä¸€å¤©å¯ä»¥æŸ¥è¯¢ 100 æ¬¡ï¼Œè½»åº¦ä½¿ç”¨å®Œå…¨è¶³å¤Ÿï¼Œè¾¾åˆ°é™é¢ï¼Œæœºå™¨äººä¼šè‡ªåŠ¨å…³é—­ Google æœç´¢ã€‚ |
| GOOGLE_CSE_IDï¼ˆå¯é€‰ï¼‰  | å¦‚æœéœ€è¦è°·æ­Œæœç´¢ï¼Œåˆ™éœ€è¦ä¸ GOOGLE_API_KEY ä¸€èµ·è®¾ç½®ã€‚åœ¨[å¯ç¼–ç¨‹æœç´¢å¼•æ“](https://programmablesearchengine.google.com/) ä¸­æ–°å»ºæœç´¢å¼•æ“ï¼Œå…¶ä¸­ æœç´¢å¼•æ“ ID å°±æ˜¯ GOOGLE_CSE_ID çš„å€¼ã€‚ |
| whitelistï¼ˆå¯é€‰ï¼‰      | è®¾ç½®å“ªäº›ç”¨æˆ·å¯ä»¥è®¿é—®æœºå™¨äººï¼Œå°†æˆæƒä½¿ç”¨æœºå™¨äººçš„ç”¨æˆ· ID ç”¨`,`è¿æ¥èµ·æ¥ã€‚é»˜è®¤å€¼ä¸º`None`ï¼Œå³å¯¹æ‰€æœ‰äººå¼€æ”¾æœºå™¨äººã€‚ |

## Zeabur è¿œç¨‹éƒ¨ç½² (æ¨è)

ä¸€é”®éƒ¨ç½²ï¼š

[![Deploy on Zeabur](https://zeabur.com/button.svg)](https://zeabur.com/templates/R5JY5O?referralCode=yym68686)

å¦‚æœéœ€è¦åç»­åŠŸèƒ½æ›´æ–°ï¼Œåˆ™æ¨èä»¥ä¸‹éƒ¨ç½²æ–¹å¼ï¼š

å…ˆ fork æœ¬ä»“åº“ï¼Œå†æ³¨å†Œ [Zeabur](https://zeabur.com)ï¼Œå…è´¹é¢åº¦è¶³å¤Ÿè½»åº¦ä½¿ç”¨ï¼Œä»è‡ªå·±çš„ Github ä»“åº“å¯¼å…¥ï¼Œè®¾ç½®å¥½åŸŸåï¼ˆå¿…é¡»ä¸ WEB_HOOK ä¸€è‡´ï¼‰å’Œç¯å¢ƒå˜é‡åï¼Œé‡æ–°éƒ¨ç½²å³å¯ã€‚åç»­éœ€è¦åŠŸèƒ½æ›´æ–°åªéœ€è¦åœ¨è‡ªå·±çš„ä»“åº“é‡ŒåŒæ­¥æœ¬ä»“åº“å¹¶åœ¨ Zeabur é‡æ–°éƒ¨ç½²å³å¯è·å¾—æœ€æ–°åŠŸèƒ½ã€‚

## Replit è¿œç¨‹éƒ¨ç½²

[![Run on Repl.it](https://replit.com/badge/github/yym68686/ChatGPT-Telegram-Bot)](https://replit.com/new/github/yym68686/ChatGPT-Telegram-Bot)

å¯¼å…¥ Github ä»“åº“åï¼Œè®¾ç½®è¿è¡Œå‘½ä»¤

```bash
pip install -r requirements.txt > /dev/null && python3 main.py
```

åœ¨å·¦è¾¹æ  Tools é‡Œé¢é€‰æ‹© Secretsï¼Œæ·»åŠ æœºå™¨äººéœ€è¦çš„ç¯å¢ƒå˜é‡ï¼Œå…¶ä¸­ï¼š

- WEB_HOOK: åœ¨ Replit ä¼šè‡ªåŠ¨åˆ†é…ä¸€ä¸ªåŸŸåç»™ä½ ï¼Œå¡«å…¥ `https://appname.username.repl.co`

ç‚¹å‡»å±å¹•ä¸Šæ–¹çš„ runï¼Œå³å¯è¿è¡Œæœºå™¨äººã€‚è®°å¾—æ‰“å¼€ Always Onã€‚

## fly.io è¿œç¨‹éƒ¨ç½²

å®˜æ–¹æ–‡æ¡£ï¼šhttps://fly.io/docs/

ä½¿ç”¨ Docker é•œåƒéƒ¨ç½² fly.io åº”ç”¨

```bash
flyctl launch --image yym68686/chatgpt:1.0
```

è¾“å…¥åº”ç”¨çš„åå­—ï¼Œè‹¥æç¤ºåˆå§‹åŒ– Postgresql æˆ– Redisï¼Œä¸€å¾‹é€‰æ‹©å¦ã€‚

æŒ‰ç…§æç¤ºéƒ¨ç½²ã€‚åœ¨å®˜ç½‘æ§åˆ¶é¢æ¿ä¼šæä¾›ä¸€ä¸ªäºŒçº§åŸŸåï¼Œå¯ä»¥ä½¿ç”¨è¿™ä¸ªäºŒçº§åŸŸåè®¿é—®åˆ°æœåŠ¡ã€‚

è®¾ç½®ç¯å¢ƒå˜é‡

```bash
flyctl secrets set WEB_HOOK=https://flyio-app-name.fly.dev/
flyctl secrets set BOT_TOKEN=bottoken
flyctl secrets set API=
flyctl secrets set COOKIES=
# å¯é€‰
flyctl secrets set NICK=javis
```

æŸ¥çœ‹æ‰€æœ‰ç¯å¢ƒå˜é‡

```bash
flyctl secrets list
```

ç§»é™¤ç¯å¢ƒå˜é‡

```bash
flyctl secrets unset MY_SECRET DATABASE_URL
```

ssh è¿æ¥ fly.io å®¹å™¨

```bash
# ç”Ÿæˆå¯†é’¥
flyctl ssh issue --agent
# ssh è¿æ¥
flyctl ssh establish
```

æŸ¥çœ‹ webhook url æ˜¯å¦æ­£ç¡®

```
https://api.telegram.org/bot<token>/getWebhookInfo
```

## Docker æœ¬åœ°éƒ¨ç½²

å¯åŠ¨å®¹å™¨

```bash
docker run -p 80:8080 -dit \
    -e BOT_TOKEN="telegram bot token" \
    -e WEB_HOOK="https://your_host.com/" \
    -e API="" \
    -e API_URL= \
    yym68686/chatgpt:1.0
```

æˆ–è€…ä½ æƒ³ä½¿ç”¨ Docker Composeï¼Œä¸‹é¢æ˜¯ docker-compose.yml ç¤ºä¾‹:

```yaml
version: "3.5"
services:
  chatgptbot:
    container_name: chatgptbot
    image: yym68686/chatgpt:1.0
    environment:
      - BOT_TOKEN=
      - WEB_HOOK=
      - API=
      - API_URL=
    ports:
      - 80:8080
```

åå°è¿è¡Œ Docker Compose å®¹å™¨

```bash
docker-compose up -d
```

ä»“åº“æ‰“åŒ… Docker é•œåƒï¼Œæ¨é€åˆ° Docker Hub

```bash
docker build --no-cache -t chatgpt:1.0 -f Dockerfile.build --platform linux/amd64 .
docker tag chatgpt:1.0 yym68686/chatgpt:1.0
docker push yym68686/chatgpt:1.0
```

## Reference

å‚è€ƒé¡¹ç›®ï¼š

https://core.telegram.org/bots/api

https://github.com/acheong08/ChatGPT

https://github.com/franalgaba/chatgpt-telegram-bot-serverless

https://github.com/gpchelkin/scdlbot/blob/d64d14f6c6d357ba818e80b8a0a9291c2146d6fe/scdlbot/__main__.py#L8

æ¶ˆæ¯çš„ markdown æ¸²æŸ“ç”¨çš„æ˜¯æˆ‘çš„å¦ä¸€ä¸ªé¡¹ç›®ï¼šhttps://github.com/yym68686/md2tgmd

## Star History

<a href="https://github.com/yym68686/ChatGPT-Telegram-Bot/stargazers">
        <img width="500" alt="Star History Chart" src="https://api.star-history.com/svg?repos=yym68686/ChatGPT-Telegram-Bot&type=Date">
</a>