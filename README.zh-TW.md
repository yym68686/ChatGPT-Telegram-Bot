# ChatGPT Telegram Bot

åŠ å…¥ [Telegram ç¾¤èŠ](https://t.me/+_01cz9tAkUc1YzZl) ï¼Œåˆ†äº«æ‚¨çš„ç”¨æˆ¶é«”é©—æˆ–å ±å‘ŠéŒ¯èª¤ã€‚

[è‹±æ–‡](./README.md) | [ç°¡é«”ä¸­æ–‡](./README.zh-CN.md) | [ç¹é«”ä¸­æ–‡](./README.zh-TW.md)

## âœ¨ åŠŸèƒ½

âœ… æ”¯æ´ ChatGPT å’Œ GPT4 API

âœ… æ”¯æŒä½¿ç”¨ duckduckgo å’Œ GoogleğŸ” çš„åœ¨ç·šæœå°‹ã€‚DuckDuckGo æœå°‹é»˜èªæä¾›ï¼Œä½¿ç”¨è€…éœ€è¦ç”³è«‹å®˜æ–¹çš„ Google æœå°‹ APIï¼Œå®ƒå¯ä»¥æä¾› GPT ä¹‹å‰ç„¡æ³•å›ç­”çš„å¯¦æ™‚ä¿¡æ¯ï¼Œä¾‹å¦‚ä»Šæ—¥å¾®åšç†±æœã€æŸåœ°å¤©æ°£ã€æŸäººæˆ–æ–°èçš„é€²å±•ç­‰ã€‚

âœ… æ”¯æ´åŸºæ–¼åµŒå…¥å¼å‘é‡æ•¸æ“šåº«çš„æ–‡ä»¶ QAã€‚åœ¨æœå°‹ä¸­ï¼Œæœç´¢åˆ°çš„ PDF æœƒè‡ªå‹•é€²è¡Œ PDF æ–‡ä»¶çš„å‘é‡èªç¾©æœç´¢ï¼Œä¸¦æ ¹æ“šå‘é‡æ•¸æ“šåº«æå–ç›¸é—œå…§å®¹ã€‚æ”¯æŒä½¿ç”¨â€œqaâ€å‘½ä»¤å°‡â€œsitemap.xmlâ€æ–‡ä»¶çš„æ•´å€‹ç¶²ç«™å‘é‡åŒ–ï¼Œä¸¦åŸºæ–¼å‘é‡æ•¸æ“šåº«å›ç­”å•é¡Œï¼Œç‰¹åˆ¥é©ç”¨æ–¼ä¸€äº›é …ç›®çš„æ–‡æª”ç¶²ç«™å’Œ Wiki ç¶²ç«™ã€‚

âœ… åœ¨èŠå¤©çª—å£ä¸­é€šéâ€œinfoâ€å‘½ä»¤æ”¯æ´åœ¨ GPT3.5ã€GPT4 å’Œå…¶ä»–æ¨¡å‹ä¹‹é–“é€²è¡Œåˆ‡æ›

âœ… ç•°æ­¥è™•ç†æ¶ˆæ¯ï¼Œå¤šç·šç¨‹å›ç­”å•é¡Œï¼Œæ”¯æ´éš”é›¢å°è©±ï¼Œä¸åŒç”¨æˆ¶æœ‰ä¸åŒå°è©±

âœ… æ”¯æ´æ¶ˆæ¯çš„ç²¾ç¢ºçš„ Markdown æ¸²æŸ“ï¼Œä½¿ç”¨æˆ‘å¦ä¸€å€‹é …ç›® [project](https://github.com/yym68686/md2tgmd) 

âœ… æ”¯æ´æµå¼è¼¸å‡ºï¼Œå¯¦ç¾æ‰“å­—æ©Ÿæ•ˆæœ

âœ… æ”¯æ´ç™½åå–®ï¼Œé˜²æ­¢æ¿«ç”¨å’Œä¿¡æ¯å¤–æ´©

âœ… è·¨å¹³å°ï¼Œåœ¨ Telegram ä¸Šéš¨æ™‚éš¨åœ°æ‰“ç ´çŸ¥è­˜å£å£˜

âœ… æ”¯æ´ä¸€éµ Zeaburï¼ŒReplit éƒ¨ç½²ï¼ŒçœŸæ­£çš„é›¶æˆæœ¬ï¼Œå‚»ç“œå¼éƒ¨ç½²ï¼Œé‚„æ”¯æ´ kuma é˜²ç¡çœ ã€‚ä¹Ÿæ”¯æ´ Dockerã€fly.io éƒ¨ç½²

## ç’°å¢ƒè®Šæ•¸

| è®Šé‡åç¨±                  | è©•è«–                                                         |
| ------------------------- | ------------------------------------------------------------ |
| **BOT_TOKEN (å¿…éœ€çš„)**    | Telegram æ©Ÿå™¨äºº tokenã€‚åœ¨ [BotFather](https://t.me/BotFather) ä¸Šå‰µå»ºä¸€å€‹æ©Ÿå™¨äººä¾†ç²å– BOT_TOKENã€‚ |
| **WEB_HOOK (å¿…éœ€çš„)**     | ç•¶ Telegram æ©Ÿå™¨äººæ”¶åˆ°ç”¨æˆ¶ä¿¡æ¯æ™‚ï¼Œè©²ä¿¡æ¯å°‡è¢«å‚³éåˆ° WEB_HOOKï¼Œæ©Ÿå™¨äººå°‡åœ¨ WEB_HOOK ä¸Šè½å–ä¸¦åŠæ™‚è™•ç†æ¥æ”¶åˆ°çš„æ¶ˆæ¯ã€‚ |
| **API (å¿…éœ€çš„)**          | OpenAI æˆ–ç¬¬ä¸‰æ–¹ API æ†‘è­‰ã€‚                                 |
| API_URL(å¯é¸)             | å¦‚æœä½¿ç”¨çš„æ˜¯ OpenAI å®˜æ–¹ APIï¼Œå‰‡ä¸éœ€è¦è¨­ç½®æ­¤å€¼ï¼Œå¦‚æœä½¿ç”¨ç¬¬ä¸‰æ–¹ APIï¼Œå‰‡éœ€è¦å¡«å¯«ç¬¬ä¸‰æ–¹ä»£ç†ç¶²ç«™ã€‚é»˜èªç‚ºï¼šhttps://api.openai.com/v1/chat/completions |
| GPT_ENGINE (å¯é¸)         | è¨­ç½®é»˜èª QA æ¨¡å‹ï¼›é»˜èªç‚º `gpt-3.5-turbo`ã€‚æ­¤é …ç›®å¯ä»¥åœ¨æ©Ÿå™¨äººçš„â€œinfoâ€å‘½ä»¤ä¸­è‡ªç”±åˆ‡æ›ï¼Œç†è«–ä¸Šä¸éœ€è¦è¨­ç½®ã€‚ |
| NICK(å¯é¸)                |  é»˜èªå€¼ç‚ºç©ºï¼ŒNICK æ˜¯æ©Ÿå™¨äººçš„åå­—ã€‚åªæœ‰ç•¶ç”¨æˆ¶è¼¸å…¥å…§å®¹ä»¥ NICK é–‹é ­æ™‚ï¼Œæ©Ÿå™¨äººæ‰æœƒå›è¦†ï¼Œå¦å‰‡æ©Ÿå™¨äººæœƒå›è¦†ä»»ä½•æ¶ˆæ¯ã€‚ç‰¹åˆ¥æ˜¯åœ¨ç¾¤èŠä¸­ï¼Œå¦‚æœæ²’æœ‰"NICK"ï¼Œæ©Ÿå™¨äººæœƒå›è¦†æ‰€æœ‰æ¶ˆæ¯ã€‚ |
| PASS_HISTORY(å¯é¸)        | é»˜èªç‚º trueã€‚æ©Ÿå™¨äººæœƒè¨˜ä½å°è©±æ­·å²ï¼Œä¸¦åœ¨ä¸‹æ¬¡å›è¦†æ™‚è€ƒæ…®ä¸Šä¸‹æ–‡ã€‚å¦‚æœè¨­ç½®ç‚º falseï¼Œå‰‡æ©Ÿå™¨äººå°‡å¿˜è¨˜å°è©±è¨˜éŒ„ï¼Œåƒ…è€ƒæ…®ç•¶å‰å°è©±ã€‚ |
| GOOGLE_API_KEY(å¯é¸)      | å¦‚æœéœ€è¦ä½¿ç”¨ Google æœå°‹ï¼Œå‰‡éœ€è¦è¨­ç½®å®ƒã€‚å¦‚æœæœªè¨­ç½®æ­¤ç’°å¢ƒè®Šé‡ï¼Œæ©Ÿå™¨äººå°‡é»˜èªæä¾› duckduckgo æœå°‹ã€‚åœ¨ Google Cloud çš„ [API åŠæœå‹™](https://console.cloud.google.com/apis/api/customsearch.googleapis.com) ä¸­å‰µå»ºæ†‘è­‰ï¼ŒAPI é‡‘é‘°å°‡åœ¨æ†‘è­‰é é¢ä¸Šçš„ GOOGLE_API_KEY ä¸­ã€‚Google æœå°‹å¯ä»¥æŸ¥è©¢100æ¬¡/å¤©ï¼Œå°æ–¼è¼•åº¦ä½¿ç”¨ä¾†èªªå®Œå…¨è¶³å¤ ã€‚ç•¶ä½¿ç”¨é™åˆ¶å·²é”åˆ°æ™‚ï¼Œæ©Ÿå™¨äººå°‡è‡ªå‹•é—œé–‰ Google æœå°‹ã€‚ |
| GOOGLE_CSE_ID(å¯é¸)       | å¦‚æœéœ€è¦ä½¿ç”¨ Google æœå°‹ï¼Œå‰‡éœ€è¦èˆ‡ GOOGLE_API_KEY ä¸€èµ·è¨­ç½®ã€‚åœ¨ [å¯ç·¨ç¨‹æœç´¢å¼•æ“](https://programmablesearchengine.google.com/) ä¸­å‰µå»ºæœç´¢å¼•æ“ï¼Œæœç´¢å¼•æ“ ID æ˜¯ GOOGLE_CSE_ID çš„å€¼ã€‚ |
| whitelist(å¯é¸)          | è¨­ç½®å“ªäº›ç”¨æˆ¶å¯ä»¥è¨ªå•æ©Ÿå™¨äººï¼Œä¸¦å°‡ä½¿ç”¨æ©Ÿå™¨äººçš„æˆæ¬Šç”¨æˆ¶ ID é€£æ¥èµ·ä¾†ï¼Œç”¨â€œ,â€éš”é–‹ã€‚é»˜èªå€¼ç‚ºâ€œNoneâ€ï¼Œé€™æ„å‘³è‘—æ©Ÿå™¨äººå‘æ‰€æœ‰äººé–‹æ”¾ã€‚ |

## Zeabur é ç¨‹éƒ¨ç½²ï¼ˆå»ºè­°ï¼‰

å–®æ“Šä¸€éµéƒ¨ç½²ï¼š

[![åœ¨ Zeabur ä¸Šéƒ¨ç½²](https://zeabur.com/button.svg)](https://zeabur.com/templates/R5JY5O?referralCode=yym68686)

å¦‚æœéœ€è¦å¾ŒçºŒåŠŸèƒ½æ›´æ–°ï¼Œå»ºè­°æ¡ç”¨ä»¥ä¸‹éƒ¨ç½²æ–¹æ³•ï¼š

é¦–å…ˆï¼Œå…ˆ fork æ­¤å­˜å„²åº«ï¼Œç„¶å¾Œè¨»å†Š [Zeabur](https://zeabur.com)ã€‚å…è²»é…é¡å°æ–¼è¼•åº¦ä½¿ç”¨ä¾†èªªè¶³å¤ äº†ã€‚å¾æ‚¨è‡ªå·±çš„ Github å­˜å„²åº«å°å…¥ï¼Œè¨­ç½®åŸŸåï¼ˆå¿…é ˆèˆ‡ WEB_HOOK ä¸€è‡´ï¼‰å’Œç’°å¢ƒè®Šé‡ï¼Œç„¶å¾Œé‡æ–°éƒ¨ç½²ã€‚å¦‚æœéœ€è¦æ›´æ–°å¾ŒçºŒåŠŸèƒ½ï¼Œåªéœ€åŒæ­¥æ­¤å­˜å„²åº«åˆ°è‡ªå·±çš„å­˜å„²åº«ä¸­ï¼Œç„¶å¾Œåœ¨ Zeabur ä¸­é‡æ–°éƒ¨ç½²ä»¥ç²å–æœ€æ–°çš„åŠŸèƒ½ã€‚

## Replit é ç¨‹éƒ¨ç½²

[![åœ¨ Repl.it ä¸Šé‹è¡Œ](https://replit.com/badge/github/yym68686/ChatGPT-Telegram-Bot)](https://replit.com/new/github/yym68686/ChatGPT-Telegram-Bot)

åŒ¯å…¥ Github å­˜å„²åº«å¾Œï¼Œè¨­ç½®é‹è¡Œå‘½ä»¤

```bash
pip install -r requirements.txt > /dev/null && python3 main.py
```

åœ¨å·¥å…·é‚Šæ¬„ä¸­é¸æ“‡ Secretsï¼Œæ·»åŠ æ©Ÿå™¨äººæ‰€éœ€çš„ç’°å¢ƒè®Šé‡ï¼š

- WEB_HOOKï¼šReplitå°‡è‡ªå‹•åˆ†é…åŸŸåçµ¦æ‚¨ï¼Œå¡«å¯« `https://appname.username.repl.co`
- è¨˜ä½æ‰“é–‹â€œä¸€ç›´é–‹å•Ÿâ€ã€‚

å–®æ“Šå±å¹•é ‚éƒ¨çš„é‹è¡ŒæŒ‰éˆ•ä»¥é‹è¡Œæ©Ÿå™¨äººã€‚

## fly.io é ç¨‹éƒ¨ç½²

å®˜æ–¹æ–‡æª”: https://fly.io/docs/

ä½¿ç”¨ Docker æ˜ åƒéƒ¨ç½² fly.io æ‡‰ç”¨

```bash
flyctl launch --image yym68686/chatgpt:1.0
```

åœ¨æç¤ºæ™‚è¼¸å…¥æ‡‰ç”¨ç¨‹åºåç¨±ï¼Œç„¶å¾Œå°åˆå§‹åŒ– Postgresql æˆ– Redis é¸æ“‡â€œä¸â€ã€‚æŒ‰ç…§æç¤ºéƒ¨ç½²ã€‚ä¸€å€‹äºŒç´šåŸŸåå°‡åœ¨å®˜æ–¹æ§åˆ¶é¢æ¿ä¸­æä¾›ï¼Œå¯ç”¨æ–¼è¨ªå•æœå‹™ã€‚

è¨­ç½®ç’°å¢ƒè®Šé‡

```bash
flyctl secrets set WEB_HOOK=https://flyio-app-name.fly.dev/
flyctl secrets set BOT_TOKEN=bottoken
flyctl secrets set API=
# optional
flyctl secrets set NICK=javis
```

æŸ¥çœ‹æ‰€æœ‰ç’°å¢ƒè®Šé‡

```bash
flyctl secrets list
```

åˆªé™¤ç’°å¢ƒè®Šé‡

```bash
flyctl secrets unset MY_SECRET DATABASE_URL
```

ssh åˆ° fly.io å®¹å™¨

```bash
flyctl ssh issue --agent
# ssh connection
flyctl ssh establish
```

æª¢æŸ¥ webhook URL æ˜¯å¦æ­£ç¢º

```bash
https://api.telegram.org/bot<token>/getWebhookInfo
```

## Docker æœ¬åœ°éƒ¨ç½²

å•Ÿå‹•å®¹å™¨

```bash
docker run -p 80:8080 -dit \
    -e BOT_TOKEN="telegram bot token" \
    -e WEB_HOOK="https://your_host.com/" \
    -e API="" \
    -e API_URL= \
    yym68686/chatgpt:1.0
```

æˆ–è€…å¦‚æœæƒ³ä½¿ç”¨ Docker Composeï¼Œæ­¤è™•æä¾›ä¸€å€‹docker-compose.ymlç¤ºä¾‹ï¼š

```yaml
version: "3.5"
services:
  chatgptbot:
    container_name: chatgptbot
    image: yym68686/chatgpt:1.0
    environment:
      - BOT_TOKEN=
      - WEB_HOOK=
      - API=
      - API_URL=
    ports:
      - 80:8080
```

åœ¨å¾Œå°é‹è¡Œ Docker Compose å®¹å™¨

```bash
docker-compose up -d
```

åœ¨å­˜å„²åº«ä¸­æ‰“åŒ… Docker æ˜ åƒï¼Œä¸¦ä¸Šå‚³è‡³ Docker Hubï¼š

```bash
docker build --no-cache -t chatgpt:1.0 -f Dockerfile.build --platform linux/amd64 .
docker tag chatgpt:1.0 yym68686/chatgpt:1.0
docker push yym68686/chatgpt:1.0
```

## å¼•ç”¨

åƒè€ƒé …ç›®ï¼š

https://core.telegram.org/bots/api

https://github.com/acheong08/ChatGPT

https://github.com/franalgaba/chatgpt-telegram-bot-serverless

https://github.com/gpchelkin/scdlbot/blob/d64d14f6c6d357ba818e80b8a0a9291c2146d6fe/scdlbot/__main__.py#L8

æ¶ˆæ¯çš„ markdown æ¸²æŸ“ä½¿ç”¨æˆ‘çš„å¦ä¸€å€‹é …ç›® [project](https://github.com/yym68686/md2tgmd)ã€‚

## Star History

<a href="https://github.com/yym68686/ChatGPT-Telegram-Bot/stargazers">
        <img width="500" alt="Star History Chart" src="https://api.star-history.com/svg?repos=yym68686/ChatGPT-Telegram-Bot&type=Date">
</a>