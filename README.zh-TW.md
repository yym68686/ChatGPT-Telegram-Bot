# ChatGPT Telegram Bot

åŠ å…¥ [Telegram ç¾¤çµ„](https://t.me/+_01cz9tAkUc1YzZl) åˆ†äº«æ‚¨çš„ä½¿ç”¨ç¶“é©—æˆ–å ±å‘ŠéŒ¯èª¤ã€‚

[è‹±æ–‡](./README.md)|[ç°¡é«”ä¸­æ–‡](./README.zh-CN.md)|[ç¹é«”ä¸­æ–‡](./README.zh-TW.md)

## âœ¨ ç‰¹é»

âœ… æ”¯æ´ ChatGPT å’Œ GPT4 API

âœ… æ”¯æ´ä½¿ç”¨ DuckDuckGo å’Œ GoogleğŸ” é€²è¡Œåœ¨ç·šæœç´¢ã€‚é è¨­æä¾› DuckDuckGo æœç´¢ï¼Œè€Œ Google æœç´¢çš„å®˜æ–¹ API éœ€è¦ç”¨æˆ¶ç”³è«‹ã€‚å®ƒå¯ä»¥æä¾› GPT ä¹‹å‰ç„¡æ³•å›ç­”çš„å³æ™‚è³‡è¨Šï¼Œä¾‹å¦‚å¾®åšç†±æœã€ä»Šå¤©ç‰¹å®šåœ°é»çš„å¤©æ°£ä»¥åŠç‰¹å®šäººå“¡æˆ–æ–°èçš„é€²åº¦ã€‚

âœ… æ”¯æ´åŸºæ–¼å…§ç½®å‘é‡æ•¸æ“šåº«çš„æ–‡æª” QAã€‚åœ¨æœç´¢ä¸­ï¼Œå°æ–¼è¢«æœç´¢çš„ PDFï¼Œæœƒå° PDF æ–‡æª”é€²è¡Œè‡ªå‹•å‘é‡èªç¾©æœç´¢ï¼Œä¸¦æå–èˆ‡å‘é‡æ•¸æ“šåº«ç›¸é—œçš„å…§å®¹ã€‚æ”¯æ´ä½¿ç”¨ â€œqaâ€ å‘½ä»¤å‘é‡åŒ– â€œsitemap.xmlâ€ æ–‡ä»¶ä¸­çš„æ•´å€‹ç¶²ç«™ï¼Œä¸¦åœ¨å‘é‡æ•¸æ“šåº«çš„åŸºç¤ä¸Šå›ç­”å•é¡Œï¼Œå°¤å…¶é©ç”¨æ–¼æŸäº›å°ˆæ¡ˆçš„æ–‡æª”ç¶²ç«™å’Œ Wiki ç¶²ç«™ã€‚â€‹

âœ… æ”¯æ´é€éèŠå¤©çª—å£ä¸­çš„ â€œinfoâ€ å‘½ä»¤åœ¨ GPT3.5ã€GPT4 å’Œå…¶ä»–æ¨¡å‹ä¹‹é–“é€²è¡Œåˆ‡æ›

âœ… éåŒæ­¥è™•ç†è¨Šæ¯ï¼Œå¤šç·šç¨‹å›ç­”å•é¡Œï¼Œæ”¯æ´ç¨ç«‹å°è©±ï¼Œä¸¦ä½¿ä¸åŒçš„ç”¨æˆ¶æ“æœ‰ä¸åŒçš„å°è©±â€‹

âœ… æ”¯æ´ç²¾ç¢ºçš„ markdown æ¸²æŸ“æ¶ˆæ¯ï¼Œä½¿ç”¨æˆ‘çš„å¦ä¸€å€‹ [é …ç›®](https://github.com/yym68686/md2tgmd)

âœ… æ”¯æ´æµè¼¸å‡ºï¼Œå¯¦ç¾æ‰“å­—æ©Ÿæ•ˆæœ

âœ… æ”¯æ´ç™½åå–®ï¼Œä»¥é˜²æ­¢æ¿«ç”¨å’Œä¿¡æ¯æ³„éœ²

âœ… è·¨å¹³å°ï¼Œåœ¨ Telegram ä¸Šéš¨æ™‚éš¨åœ°æ‰“ç ´çŸ¥è­˜éšœç¤™

âœ… æ”¯æ´ä¸€éµ Zeaburã€Replit éƒ¨ç½²ï¼ŒçœŸæ­£çš„é›¶æˆæœ¬ã€ç™½ç™¡å¼éƒ¨ç½²ï¼Œæ”¯æ´ kuma é˜²ç¡çœ ã€‚é‚„æ”¯æ´ Dockerã€fly.io éƒ¨ç½²

## ç’°å¢ƒè®Šé‡

| è®Šé‡åç¨±                  | è©•è«–                                                         |
| ------------------------- | ------------------------------------------------------------ |
| **BOT_TOKENï¼ˆå¿…å¡«ï¼‰**          | Telegram æ©Ÿå™¨äºº tokenã€‚åœ¨ [BotFather](https://t.me/BotFather) ä¸Šå‰µå»ºæ©Ÿå™¨äººä»¥ç²å¾— BOT_TOKENã€‚ |
| **WEB_HOOKï¼ˆå¿…å¡«ï¼‰**           | æ¯ç•¶ Telegram æ©Ÿå™¨äººæ¥æ”¶åˆ°ç”¨æˆ¶æ¶ˆæ¯ï¼Œè©²æ¶ˆæ¯å°‡è¢«å‚³éåˆ° WEB_HOOKï¼Œæ©Ÿå™¨äººå°‡åœ¨ WEB_HOOK ä¸Šç›£è½ï¼Œéš¨æ™‚è™•ç†æ”¶åˆ°çš„æ¶ˆæ¯ã€‚ |
| **APIï¼ˆå¿…å¡«ï¼‰**                | OpenAI æˆ–ç¬¬ä¸‰æ–¹ API é‡‘é‘°ã€‚                                |
| API_URLï¼ˆå¯é¸ï¼‰            | å¦‚æœæ‚¨ä½¿ç”¨ OpenAI çš„å®˜æ–¹ APIï¼Œå‰‡ä¸éœ€è¦è¨­ç½®æ­¤é …ã€‚å¦‚æœæ‚¨ä½¿ç”¨ç¬¬ä¸‰æ–¹ APIï¼Œå‰‡éœ€è¦å¡«å¯«ç¬¬ä¸‰æ–¹ä»£ç†ç¶²ç«™ã€‚é»˜èªç‚º: https://api.openai.com/v1/chat/completions |
| GPT_ENGINEï¼ˆå¯é¸ï¼‰         | è¨­ç½®é»˜èª QA æ¨¡å‹ï¼›é»˜èªç‚ºï¼š`gpt-3.5-turbo`ã€‚è©²é …å¯ä»¥é€šéæ©Ÿå™¨äººçš„ â€œinfoâ€ å‘½ä»¤è‡ªç”±åˆ‡æ›ï¼ŒåŸå‰‡ä¸Šä¸éœ€è¦é€²è¡Œè¨­ç½®ã€‚ |
| NICKï¼ˆå¯é¸ï¼‰               | é è¨­å€¼ç‚ºç©ºï¼ŒNICK æ˜¯æ©Ÿå™¨äººçš„åå­—ã€‚ç•¶ç”¨æˆ¶è¼¸å…¥çš„æ¶ˆæ¯ä»¥ NICK é–‹é ­æ™‚ï¼Œæ©Ÿå™¨äººåªæœƒå›æ‡‰è©²æ¶ˆæ¯ï¼Œå¦å‰‡æ©Ÿå™¨äººæœƒå›æ‡‰æ‰€æœ‰æ¶ˆæ¯ã€‚å°¤å…¶åœ¨ç¾¤èŠä¸­ï¼Œå¦‚æœæ²’æœ‰ NICKï¼Œæ©Ÿå™¨äººæœƒå›æ‡‰æ‰€æœ‰æ¶ˆæ¯ã€‚ |
| PASS_HISTORYï¼ˆå¯é¸ï¼‰       | é è¨­å€¼ç‚º trueã€‚æ©Ÿå™¨äººè¨˜ä½å°è©±è¨˜éŒ„ï¼Œä¸‹ä¸€æ¬¡å›ç­”æ™‚æœƒè€ƒæ…®ä¸Šä¸‹æ–‡ã€‚å¦‚æœè¨­ç½®ç‚º falseï¼Œæ©Ÿå™¨äººæœƒå¿˜è¨˜å°è©±è¨˜éŒ„ï¼Œåªè€ƒæ…®ç•¶å‰å°è©±ã€‚ |
| GOOGLE_API_KEYï¼ˆå¯é¸ï¼‰     | å¦‚æœæ‚¨éœ€è¦ä½¿ç”¨ Google æœç´¢ï¼Œæ‚¨éœ€è¦é€²è¡Œè¨­ç½®ã€‚å¦‚æœæœªè¨­ç½®æ­¤ç’°å¢ƒè®Šé‡ï¼Œæ©Ÿå™¨äººå°‡é»˜èªæä¾› DuckDuckGo æœç´¢ã€‚åœ¨ Google Cloud çš„ [API å’Œæœå‹™](https://console.cloud.google.com/apis/api/customsearch.googleapis.com) ä¸­å‰µå»ºæ†‘æ“šï¼ŒAPI é‡‘é‘°åœ¨æ†‘æ“šé é¢ä¸Šæ˜¯ GOOGLE_API_KEYã€‚Google æœç´¢å¯ä»¥æŸ¥è©¢ 100 æ¬¡/æ—¥ï¼Œé€™å°è¼•åº¦ä½¿ç”¨è€…å·²è¶³å¤ ã€‚ç•¶ä½¿ç”¨é™åˆ¶å·²åˆ°é”æ™‚ï¼Œæ©Ÿå™¨äººå°‡è‡ªå‹•é—œé–‰ Google æœç´¢ã€‚ |
| GOOGLE_CSE_IDï¼ˆå¯é¸ï¼‰      | å¦‚æœæ‚¨éœ€è¦ä½¿ç”¨ Google æœç´¢ï¼Œæ‚¨éœ€è¦èˆ‡ GOOGLE_API_KEY ä¸€èµ·è¨­ç½®ã€‚åœ¨ [å¯ç·¨ç¨‹æœç´¢å¼•æ“](https://programmablesearchengine.google.com/) ä¸­å‰µå»ºæœç´¢å¼•æ“ï¼Œå…¶ä¸­æœç´¢å¼•æ“ ID æ˜¯ GOOGLE_CSE_ID çš„å€¼ã€‚ |
| whitelistï¼ˆå¯é¸ï¼‰          | è¨­ç½®å“ªäº›ç”¨æˆ¶å¯ä»¥è¨ªå•æ©Ÿå™¨äººï¼Œä¸¦ç”¨ â€œï¼Œâ€ å°‡æˆæ¬Šä½¿ç”¨æ©Ÿå™¨äººçš„ç”¨æˆ¶ ID é€£æ¥ã€‚é»˜èªå€¼ç‚º `None`ï¼Œé€™æ„å‘³è‘—æ©Ÿå™¨äººå°æ‰€æœ‰äººé–‹æ”¾ã€‚ |

## Zeabur é ç¨‹éƒ¨ç½²ï¼ˆæ¨è–¦ï¼‰

ä¸€éµéƒ¨ç½²ï¼š

[![ä½¿ç”¨ Zeabur éƒ¨ç½²](https://zeabur.com/button.svg)](https://zeabur.com/templates/R5JY5O?referralCode=yym68686)

å¦‚æœéœ€è¦å¾ŒçºŒåŠŸèƒ½æ›´æ–°ï¼Œå»ºè­°ä½¿ç”¨ä»¥ä¸‹éƒ¨ç½²æ–¹æ³•ï¼š

é¦–å…ˆ fork æ­¤å­˜å„²åº«ï¼Œç„¶å¾Œè¨»å†Š [Zeabur](https://zeabur.com)ã€‚å…è²»é¡åº¦è¶³ä»¥è¼•é¬†ä½¿ç”¨ã€‚å¾æ‚¨è‡ªå·±çš„ Github å­˜å„²åº«ä¸­é€²è¡Œå°å…¥ï¼Œè¨­ç½®ç¶²åŸŸåç¨±ï¼ˆå¿…é ˆèˆ‡ WEB_HOOK ä¸€è‡´ï¼‰å’Œç’°å¢ƒè®Šé‡ï¼Œç„¶å¾Œé‡æ–°éƒ¨ç½²ã€‚å¦‚æœéœ€è¦å¾ŒçºŒåŠŸèƒ½æ›´æ–°ï¼Œåªéœ€å°‡æ­¤å­˜å„²åº«åŒæ­¥åˆ°æ‚¨è‡ªå·±çš„å­˜å„²åº«ä¸­ï¼Œç„¶å¾Œåœ¨ Zeabur ä¸­é‡æ–°éƒ¨ç½²å³å¯ç²å–æœ€æ–°çš„åŠŸèƒ½ã€‚

## Replit é ç¨‹éƒ¨ç½²

[![åœ¨ Repl.it ä¸Šé‹è¡Œ](https://replit.com/badge/github/yym68686/ChatGPT-Telegram-Bot)](https://replit.com/new/github/yym68686/ChatGPT-Telegram-Bot)

å°‡ GitHub å­˜å„²åº«å°å…¥å¾Œï¼Œè¨­ç½®é‹è¡Œå‘½ä»¤

```bash
pip install -r requirements.txt > /dev/null && python3 main.py
```

åœ¨ Tools å´é‚Šæ¬„ä¸­é¸æ“‡ Secretsï¼Œæ·»åŠ æ©Ÿæ¢°äººæ‰€éœ€çš„ç’°å¢ƒè®Šé‡ï¼Œå…¶ä¸­ï¼š

- WEB_HOOKï¼šRepl.it å°‡è‡ªå‹•ç‚ºæ‚¨åˆ†é…ä¸€å€‹ç¶²åŸŸåç¨±ï¼Œå¡«å¯« `https://appname.username.repl.co`
- è¨˜ä½è¦é–‹å•Ÿ â€œå§‹çµ‚é‹è¡Œâ€

å–®æ“Šå±å¹•é ‚éƒ¨çš„é‹è¡ŒæŒ‰éˆ•é‹è¡Œæ©Ÿæ¢°äººã€‚

## fly.io é ç¨‹éƒ¨ç½²

å®˜æ–¹æ–‡æª”: https://fly.io/docs/

ä½¿ç”¨ Docker æ˜ åƒéƒ¨ç½² fly.io æ‡‰ç”¨ç¨‹å¼

```bash
flyctl launch --image yym68686/chatgpt:1.0
```

è¼¸å…¥æ‡‰ç”¨ç¨‹å¼çš„åç¨±ï¼Œä¸¦å° Postgresql æˆ– Redis é€²è¡Œåˆå§‹åŒ–é¸æ“‡ Noã€‚

æŒ‰ç…§æç¤ºé€²è¡Œéƒ¨ç½²ã€‚åœ¨å®˜æ–¹æ§åˆ¶é¢æ¿ä¸­æä¾›äº†ä¸€å€‹æ¬¡è¦åŸŸåï¼Œå¯ä»¥ç”¨æ–¼è¨ªå•æœå‹™ã€‚

è¨­ç½®ç’°å¢ƒè®Šé‡

```bash
flyctl secrets set WEB_HOOK=https://flyio-app-name.fly.dev/
flyctl secrets set BOT_TOKEN=bottoken
flyctl secrets set API=
# optional
flyctl secrets set NICK=javis
```

æŸ¥çœ‹æ‰€æœ‰ç’°å¢ƒè®Šé‡

```bash
flyctl secrets list
```

åˆªé™¤ç’°å¢ƒè®Šé‡

```bash
flyctl secrets unset MY_SECRET DATABASE_URL
```

ssh åˆ° fly.io å®¹å™¨

```bash
flyctl ssh issue --agent
# ssh éˆæ¥
flyctl ssh establish
```

æª¢æŸ¥ webhook URL æ˜¯å¦æ­£ç¢º

```bash
https://api.telegram.org/bot<token>/getWebhookInfo
```

## Docker æœ¬åœ°éƒ¨ç½²

å•Ÿå‹•å®¹å™¨

```bash
docker run -p 80:8080 -dit \
    -e BOT_TOKEN="telegram æ©Ÿå™¨äºº token" \
    -e WEB_HOOK="https://your_host.com/" \
    -e API="" \
    -e API_URL= \
    yym68686/chatgpt:1.0
```

æˆ–è€…å¦‚æœæ‚¨æƒ³ä½¿ç”¨ Docker Composeï¼Œé€™è£¡æœ‰ä¸€å€‹ docker-compose.yml çš„ç¤ºä¾‹ï¼š

```yaml
version: "3.5"
services:
  chatgptbot:
    container_name: chatgptbot
    image: yym68686/chatgpt:1.0
    environment:
      - BOT_TOKEN=
      - WEB_HOOK=
      - API=
      - API_URL=
    ports:
      - 80:8080
```

åœ¨å¾Œå°é‹è¡Œ Docker Compose å®¹å™¨

```bash
docker-compose up -d
```

å°‡ Docker æ˜ åƒæ‰“åŒ…åœ¨å­˜å„²åº«ä¸­ä¸¦ä¸Šå‚³åˆ° Docker Hub

```bash
docker build --no-cache -t chatgpt:1.0 -f Dockerfile.build --platform linux/amd64 .
docker tag chatgpt:1.0 yym68686/chatgpt:1.0
docker push yym68686/chatgpt:1.0
```

## åƒè€ƒ

åƒè€ƒé …ç›®ï¼š

https://core.telegram.org/bots/api

https://github.com/acheong08/ChatGPT

https://github.com/franalgaba/chatgpt-telegram-bot-serverless

https://github.com/gpchelkin/scdlbot/blob/d64d14f6c6d357ba818e80b8a0a9291c2146d6fe/scdlbot/__main__.py#L8

æ¶ˆæ¯çš„ markdown æ¸²æŸ“ä½¿ç”¨äº†æˆ‘çš„å¦ä¸€å€‹ [é …ç›®](https://github.com/yym68686/md2tgmd)ã€‚

## Star å†å²

<a href="https://github.com/yym68686/ChatGPT-Telegram-Bot/stargazers">
        <img width="500" alt="Star History Chart" src="https://api.star-history.com/svg?repos=yym68686/ChatGPT-Telegram-Bot&type=Date">
</a>