# ChatGPT Telegramæ©Ÿå™¨äºº

åŠ å…¥[Telegramç¾¤çµ„](https://t.me/+_01cz9tAkUc1YzZl)èŠå¤©ä»¥åˆ†äº«æ‚¨çš„ç”¨æˆ¶é«”é©—æˆ–å ±å‘ŠéŒ¯èª¤ã€‚

[è‹±èª](./README.md) | [ç°¡é«”ä¸­æ–‡](./README.zh-CN.md) | [ç¹é«”ä¸­æ–‡](./README.zh-TW.md)

## âœ¨ åŠŸèƒ½

âœ… æ”¯æŒChatGPTå’ŒGPT4 API

âœ… æ”¯æŒä½¿ç”¨duckduckgoå’ŒGoogleğŸ”é€²è¡Œåœ¨ç·šæœç´¢ã€‚é»˜èªæƒ…æ³ä¸‹æä¾›DuckDuckGoæœç´¢ï¼Œè€Œä½¿ç”¨Googleæœç´¢çš„å®˜æ–¹APIéœ€è¦ç”¨æˆ¶ç”³è«‹ã€‚å®ƒå¯ä»¥æä¾›GPTç„¡æ³•åœ¨éå»å›ç­”çš„å¯¦æ™‚ä¿¡æ¯ï¼Œä¾‹å¦‚ä»Šæ—¥å¾®åšç†±é–€æœç´¢ï¼ŒæŸå€‹åœ°æ–¹çš„å¤©æ°£å’ŒæŸå€‹äººæˆ–æ–°èçš„é€²åº¦ç­‰ã€‚

âœ… åŸºæ–¼åµŒå…¥å¼å‘é‡æ•¸æ“šåº«æ”¯æŒæ–‡æª”QAã€‚åœ¨æœç´¢ä¸­ï¼Œå°æ–¼æœç´¢çš„PDFï¼ŒåŸ·è¡ŒPDFæ–‡æª”çš„è‡ªå‹•å‘é‡èªç¾©æœç´¢ï¼Œä¸¦åŸºæ–¼å‘é‡æ•¸æ“šåº«æå–èˆ‡pdfç›¸é—œçš„å…§å®¹ã€‚æ”¯æŒä½¿ç”¨â€œqaâ€å‘½ä»¤ä½¿ç”¨â€œsitemap.xmlâ€æ–‡ä»¶å°‡æ•´å€‹ç¶²ç«™å‘é‡åŒ–ï¼Œä¸¦åŸºæ–¼å‘é‡æ•¸æ“šåº«å›ç­”å•é¡Œï¼Œå°¤å…¶é©ç”¨æ–¼ä¸€äº›é …ç›®çš„æ–‡æª”ç¶²ç«™å’ŒWikiç¶²ç«™ã€‚

âœ… æ”¯æŒé€šéèŠå¤©çª—å£ä¸­çš„â€œinfoâ€å‘½ä»¤åœ¨GPT3.5ï¼ŒGPT4å’Œå…¶ä»–æ¨¡å‹ä¹‹é–“åˆ‡æ›

âœ… ç•°æ­¥è™•ç†æ¶ˆæ¯ï¼Œå¤šç·šç¨‹å›ç­”å•é¡Œï¼Œæ”¯æŒéš”é›¢å°è©±ï¼Œä¸åŒçš„ç”¨æˆ¶æ“æœ‰ä¸åŒçš„å°è©±

âœ… æ”¯æŒæ¶ˆæ¯çš„æº–ç¢ºçš„Markdownæ¸²æŸ“ï¼Œä½¿ç”¨æˆ‘å¦ä¸€å€‹ [project](https://github.com/yym68686/md2tgmd)

âœ… æ”¯æŒæµå¼è¼¸å‡ºï¼Œå¯¦ç¾æ‰“å­—æ©Ÿæ•ˆæœ

âœ… æ”¯æŒç™½åå–®è­¦æˆ’ï¼Œé˜²æ­¢æ¿«ç”¨å’Œä¿¡æ¯æ´©éœ²

âœ… è·¨å¹³è‡ºï¼Œéš¨æ™‚éš¨åœ°åœ¨Telegramä¸Šçªç ´çŸ¥è­˜éšœç¤™

âœ… æ”¯æŒä¸€éµZeaburï¼ŒReplitéƒ¨ç½²ï¼ŒçœŸæ­£çš„é›¶æˆæœ¬æ˜“ç”¨éƒ¨ç½²ï¼Œæ”¯æŒkumaé˜²ç¡çœ ã€‚é‚„æ”¯æŒDockerï¼Œfly.ioéƒ¨ç½²

## ç’°å¢ƒè®Šé‡

| è®Šé‡å              | è©•è«–                                                         |
| ------------------- | ------------------------------------------------------------ |
| **BOT_TOKENï¼ˆå¿…å¡«ï¼‰** | Telegramæ©Ÿå™¨äººä»¤ç‰Œã€‚åœ¨[BotFather](https://t.me/BotFather)ä¸Šå‰µå»ºä¸€å€‹æ©Ÿå™¨äººï¼Œå³å¯ç²å¾—BOT_TOKENã€‚ |
| **WEB_HOOKï¼ˆå¿…å¡«ï¼‰**  | ç•¶Telegramæ©Ÿå™¨äººæ¥æ”¶åˆ°ç”¨æˆ¶æ¶ˆæ¯æ™‚ï¼Œæ¶ˆæ¯å°‡è¢«å‚³éåˆ°WEB_HOOKï¼Œæ©Ÿå™¨äººå°‡åœ¨æ­¤è™•è½å–æ¶ˆæ¯ä¸¦åŠæ™‚è™•ç†æ¥æ”¶åˆ°çš„æ¶ˆæ¯ã€‚|
| **APIï¼ˆå¿…å¡«ï¼‰**       | OpenAIæˆ–ç¬¬ä¸‰æ–¹APIå¯†é‘°ã€‚                                   |
| API_URLï¼ˆå¯é¸ï¼‰       | å¦‚æœæ‚¨ä½¿ç”¨çš„æ˜¯OpenAI çš„å®˜æ–¹APIï¼Œåˆ™ä¸éœ€è¦è¨­ç½®æ­¤è¨­ç½®ã€‚å¦‚æœä½¿ç”¨ç¬¬ä¸‰æ–¹APIï¼Œå‰‡éœ€è¦å¡«å¯«ç¬¬ä¸‰æ–¹ä»£ç†ç¶²ç«™ã€‚é»˜èªå€¼ç‚ºï¼šhttps://api.openai.com/v1/chat/completions |
| GPT_ENGINEï¼ˆå¯é¸ï¼‰    | è¨­ç½®é»˜èªçš„QAæ¨¡å‹;é»˜èªå€¼ç‚ºï¼š`gpt-3.5-turbo`ã€‚è©²é …ç›®å¯ä»¥é€šéæ©Ÿå™¨äººçš„â€œinfoâ€å‘½ä»¤è‡ªç”±åˆ‡æ›ï¼ŒåŸå‰‡ä¸Šä¸éœ€è¦è¨­ç½®ã€‚ |
| NICKï¼ˆå¯é¸ï¼‰          | é»˜èªå€¼ç‚ºç©ºï¼Œè€ŒNICKæ˜¯æ©Ÿå™¨äººçš„åå­—ã€‚åªæœ‰ç•¶ç”¨æˆ¶è¼¸å…¥çš„æ¶ˆæ¯ä»¥NICKé–‹å§‹æ™‚ï¼Œæ©Ÿå™¨äººæ‰æœƒéŸ¿æ‡‰ï¼Œå¦å‰‡æ©Ÿå™¨äººå°‡éŸ¿æ‡‰ä»»ä½•æ¶ˆæ¯ã€‚ç‰¹åˆ¥æ˜¯åœ¨ç¾¤èŠä¸­ï¼Œå¦‚æœæ²’æœ‰NICKï¼Œæ©Ÿå™¨äººå°‡å›å¾©æ‰€æœ‰æ¶ˆæ¯ã€‚ |
| PASS_HISTORYï¼ˆå¯é¸ï¼‰  | é»˜èªå€¼ç‚ºtrueã€‚æ©Ÿå™¨äººè¨˜ä½å°è©±æ­·å²è¨˜éŒ„ï¼Œä¸¦åœ¨ä¸‹æ¬¡å›å¾©æ™‚è€ƒæ…®ä¸Šä¸‹æ–‡ã€‚å¦‚æœè¨­ç½®ç‚ºfalseï¼Œæ©Ÿå™¨äººå°‡å¿˜è¨˜å°è©±æ­·å²è¨˜éŒ„ï¼Œåƒ…è€ƒæ…®ç•¶å‰å°è©±ã€‚ |
| GOOGLE_API_KEYï¼ˆå¯é¸ï¼‰| å¦‚æœæ‚¨éœ€è¦ä½¿ç”¨Googleæœç´¢ï¼Œå‰‡éœ€è¦é€²è¡Œè¨­ç½®ã€‚å¦‚æœä¸è¨­ç½®æ­¤ç’°å¢ƒè®Šé‡ï¼Œæ©Ÿå™¨äººå°‡é»˜èªæä¾›duckduckgoæœç´¢ã€‚åœ¨Google Cloudçš„APIsï¼†Servicesä¸­å‰µå»ºæ†‘æ“šï¼ˆhttps://console.cloud.google.com/apis/api/customsearch.googleapis.comï¼‰ï¼Œä¸¦åœ¨å‡­æ®é¡µé¢ä¸Šç‚¹é€‰APIå¯†é’¥ã€‚Googleæœç´¢æ¯å¤©å¯ä»¥æŸ¥è©¢100æ¬¡ï¼Œè¿™å®Œå…¨è¶³å¤Ÿè½»åº¦ä½¿ç”¨ã€‚å½“è¾¾åˆ°ä½¿ç”¨é™åˆ¶æ—¶ï¼Œæœºå™¨äººå°†è‡ªåŠ¨å…³é—­Googleæœç´¢ã€‚ |
| GOOGLE_CSE_IDï¼ˆå¯é¸ï¼‰ | å¦‚æœæ‚¨éœ€è¦ä½¿ç”¨Googleæœç´¢ï¼Œå‰‡å¿…é ˆèˆ‡GOOGLE_API_KEYä¸€èµ·è¨­ç½®ã€‚åœ¨[Programmable Search Engine](https://programmablesearchengine.google.com/)ä¸­å‰µå»ºæœç´¢å¼•æ“ï¼Œæœç´¢å¼•æ“IDå³ä¸ºGOOGLE_CSE_IDçš„å€¼ã€‚ |
| ç™½åå–®ï¼ˆå¯é¸ï¼‰      | è¨­ç½®å“ªäº›ç”¨æˆ¶å¯ä»¥è¨ªå•æ©Ÿå™¨äººï¼Œå°‡è¢«æˆæ¬Šä½¿ç”¨æ©Ÿå™¨äººçš„ç”¨æˆ¶IDèˆ‡â€œ,â€ç›¸é€£ã€‚é»˜èªå€¼ç‚º`None`ï¼Œé€™æ„å‘³ç€æ‰€æœ‰äººéƒ½å¯ä»¥ä½¿ç”¨æ©Ÿå™¨äººã€‚ |

## Zeaburé ç¨‹éƒ¨ç½²(æ¨è–¦)

ä¸€éµéƒ¨ç½²ï¼š

[![Deploy on Zeabur](https://zeabur.com/button.svg)](https://zeabur.com/templates/R5JY5O?referralCode=yym68686)

å¦‚æœæ‚¨éœ€è¦å¾ŒçºŒåŠŸèƒ½æ›´æ–°ï¼Œå»ºè­°ä½¿ç”¨ä»¥ä¸‹éƒ¨ç½²æ–¹æ³•ï¼š

å…ˆForkæœ¬å­˜å„²åº«ï¼Œç„¶å¾Œè¨»å†Š[Zeabur](https://zeabur.com)ã€‚å…è²»é…é¡è¶³ä»¥è¼•åº¦ä½¿ç”¨ã€‚å¾æ‚¨è‡ªå·±çš„Githubå­˜å„²åº«å°å…¥ï¼Œè¨­ç½®åŸŸåï¼ˆå¿…é ˆèˆ‡WEB_HOOKä¸€è‡´ï¼‰å’Œç’°å¢ƒè®Šé‡ï¼Œç„¶å¾Œé‡æ–°éƒ¨ç½²ã€‚å¦‚æœéœ€è¦åœ¨å¾ŒçºŒå‡ç´šæ™‚ï¼Œåªéœ€è¦åœ¨è‡ªå·±çš„å­˜å„²åº«ä¸­åŒæ­¥é€™å€‹å­˜å„²åº«ï¼Œç„¶å¾Œé‡æ–°éƒ¨ç½²å³å¯ç²å¾—æœ€æ–°çš„åŠŸèƒ½ã€‚

## Replité ç¨‹éƒ¨ç½²

[![Run on Repl.it](https://replit.com/badge/github/yym68686/ChatGPT-Telegram-Bot)](https://replit.com/new/github/yym68686/ChatGPT-Telegram-Bot)

åŒ¯å…¥Githubå­˜å„²åº«å¾Œï¼Œè¨­ç½®é‹è¡Œå‘½ä»¤

```bash
pip install -r requirements.txt > /dev/null && python3 main.py
```

åœ¨å·¥å…·å´é‚Šæ¬„ä¸­é¸æ“‡Secretsï¼Œæ·»åŠ æ©Ÿå™¨äººéœ€è¦çš„ç’°å¢ƒè®Šé‡ï¼Œå…¶ä¸­ï¼š

- WEB_HOOKï¼šReplitä¼šè‡ªåŠ¨ä¸ºæ‚¨åˆ†é…ä¸€ä¸ªåŸŸåï¼Œå¡«å†™â€œhttps://appname.username.repl.coâ€
- è¨˜å¾—é–‹å•Ÿâ€œå§‹çµ‚é–‹å•Ÿâ€

å–®æ“Šå±å¹•é ‚éƒ¨çš„é‹è¡ŒæŒ‰éˆ•ä»¥é‹è¡Œæ©Ÿå™¨äººã€‚

## fly.ioé ç¨‹éƒ¨ç½²

å®˜æ–¹æ–‡æª”ï¼š https://fly.io/docs/

ä½¿ç”¨Dockeræ˜ åƒéƒ¨ç½²fly.ioæ‡‰ç”¨ç¨‹åº

```bash
flyctl launch --image yym68686/chatgpt:1.0
```

è¼¸å…¥æ‡‰ç”¨ç¨‹åºåå­—ï¼Œä¸¦é¸æ“‡å¦åˆå§‹åŒ–Postgresqlæˆ–Redisã€‚

æŒ‰ç…§æç¤ºéƒ¨ç½²ã€‚å®˜æ–¹æ§åˆ¶é¢æ¿æä¾›äº†è¾…åŠ©åŸŸåï¼Œå¯ç”¨äºè®¿é—®æœåŠ¡ã€‚

è¨­ç½®ç’°å¢ƒè®Šé‡

```bash
flyctl secrets set WEB_HOOK=https://flyio-app-name.fly.dev/
flyctl secrets set BOT_TOKEN=bottoken
flyctl secrets set API=
# optional
flyctl secrets set NICK=javis
```

æŸ¥çœ‹æ‰€æœ‰ç’°å¢ƒè®Šé‡

```bash
flyctl secrets list
```

åˆªé™¤ç’°å¢ƒè®Šé‡

```bash
flyctl secrets unset MY_SECRET DATABASE_URL
```

sshåˆ°fly.ioå®¹å™¨

```bash
flyctl ssh issue --agent
# ssh connection
flyctl ssh establish
```

æª¢æŸ¥webhook URLæ˜¯å¦æ­£ç¢º

```bash
https://api.telegram.org/bot<token>/getWebhookInfo
```

## Dockeræœ¬åœ°éƒ¨ç½²

å•Ÿå‹•å®¹å™¨

```bash
docker run -p 80:8080 -dit \
    -e BOT_TOKEN="telegram bot token" \
    -e WEB_HOOK="https://your_host.com/" \
    -e API="" \
    -e API_URL= \
    yym68686/chatgpt:1.0
```

æˆ–è€…ï¼Œå¦‚æœæ‚¨æƒ³è¦ä½¿ç”¨Docker Composeï¼Œé€™æ˜¯ä¸€å€‹docker-compose.ymlç¤ºä¾‹ï¼š

```yaml
version: "3.5"
services:
  chatgptbot:
    container_name: chatgptbot
    image: yym68686/chatgpt:1.0
    environment:
      - BOT_TOKEN=
      - WEB_HOOK=
      - API=
      - API_URL=
    ports:
      - 80:8080
```

åœ¨èƒŒæ™¯ä¸­é‹è¡ŒDocker Composeå®¹å™¨

```bash
docker-compose up -d
```

åœ¨å­˜å‚¨åº“ä¸­æ‰“åŒ…Dockeræ˜ åƒå¹¶å°†å…¶ä¸Šè½½åˆ°Docker Hub

```bash
docker build --no-cache -t chatgpt:1.0 -f Dockerfile.build --platform linux/amd64 .
docker tag chatgpt:1.0 yym68686/chatgpt:1.0
docker push yym68686/chatgpt:1.0
```

## åƒè€ƒæ–‡ç»

åƒè€ƒé …ç›®ï¼š

https://core.telegram.org/bots/api

https://github.com/acheong08/ChatGPT

https://github.com/franalgaba/chatgpt-telegram-bot-serverless

https://github.com/gpchelkin/scdlbot/blob/d64d14f6c6d357ba818e80b8a0a9291c2146d6fe/scdlbot/__main__.py#L8

æ¶ˆæ¯çš„Markdownæ¸²æŸ“ä½¿ç”¨çš„æ˜¯æˆ‘å¦ä¸€å€‹ [project](https://github.com/yym68686/md2tgmd)

## æ˜Ÿç­‰å†å²

<a href="https://github.com/yym68686/ChatGPT-Telegram-Bot/stargazers">
        <img width="500" alt="Star History Chart" src="https://api.star-history.com/svg?repos=yym68686/ChatGPT-Telegram-Bot&type=Date">
</a>